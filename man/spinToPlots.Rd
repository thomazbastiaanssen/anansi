% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ParseOutput.R
\name{spinToPlots}
\alias{spinToPlots}
\title{Take anansi output and wrangle it to a list of plottable objects.}
\usage{
spinToPlots(
  anansiYarn,
  target = anansiYarn@input@web@dictionary,
  translate = F,
  Y_translation = NULL,
  X_translation = NULL
)
}
\arguments{
\item{anansiYarn}{The output of the main anansi function.}

\item{target}{A boolean matrix. Determines which associations should be prepared for plotting. Default is the dictionary.}

\item{translate}{Boolean, default is FALSE Toggles whether to translate the names of the features in tableX and tableY to human readable names.}

\item{Y_translation}{data.frame, a lookup table with featureY names as the first column and human readable names as the second. See \code{cpd_translation} for an example file.}

\item{X_translation}{data.frame, a lookup table with featureX names as the first column and human readable names as the second. See \code{KO_translation} for an example file.}
}
\value{
a list of ready to plot data.frames and their names.
}
\description{
Take anansi output and wrangle it to a list of plottable objects.
}
\examples{
\dontrun{
#Starting off at the example in ?anansi

anansi_out = anansi(web     = web,
                    method  = "pearson",
                    groups  = FMT_metadata$Legend,
                    adjust.method = "BH",
                    verbose = TRUE)

#Let's look at all canonical interactions that also have a sufficiently well-fitting model:

outPlots = spinToPlots(anansi_out,
                       target = anansi_out@input@web@dictionary &
                                anansi_out@output@model_results$modelfit@q.values < 0.1)

#load ggplot2 and patchwork for plotting

library(ggplot2)
library(patchwork)

plotted = lapply(outPlots, FUN = function(p){

    #Main ggplot call
    ggplot(data = p$data, aes(x = X, y = Y, fill = groups)) +

    #Establish geoms:
    geom_point(shape = 21) +
    geom_smooth(method = "lm") +
    theme_bw() +

    #Improve annotation:
    scale_fill_manual(values = c("Young yFMT" = "#2166ac",
                                 "Aged oFMT"  = "#b2182b",
                                 "Aged yFMT"  = "#ef8a62")) +
    ylab(p$name[1]) +
    xlab(p$name[2]) +
    ggtitle(paste(p$name[1], "vs", p$name[2]))

 })

#Call patchwork to unify and arrange the first 6 plots

wrap_plots(plotted[1:6]) + plot_layout(guides = 'collect')

}

}
