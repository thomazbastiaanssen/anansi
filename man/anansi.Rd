% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/anansi.R
\name{anansi}
\alias{anansi}
\title{Calculate an association network}
\usage{
anansi(
  web,
  method = "pearson",
  groups = NULL,
  adjust.method = "BH",
  verbose = T,
  diff_cor = T,
  ignore_dictionary = F
)
}
\arguments{
\item{web}{An \code{anansiWeb} object, containing two tables with omics data and a dictionary that links them. See \code{weaveWebFromTables()} for how to weave a web.}

\item{method}{Correlation method. \code{method = "pearson"} is the default value. The alternatives to be passed to \code{cor()} are "spearman" and "kendall".}

\item{groups}{A categorical or continuous value necessary for differential correlations. Typically a state or treatment score. If no argument provided, anansi will let you know and still to regular correlations according to your dictionary.}

\item{adjust.method}{Method to adjust p-values for multiple comparisons. \code{adjust.method = "BH"} is the default value. See \code{p.adjust()} in the base R \code{stats} package.}

\item{verbose}{A boolean. Toggles whether to print diagnostic information while running. Useful for debugging errors on large datasets.}

\item{diff_cor}{A boolean. Toggles whether to compute differential correlations. Default is \code{TRUE}.}

\item{ignore_dictionary}{A boolean. Default is FALSE. If set to TRUE, regular all vs all associations will be tested regardless of the dictionary.}
}
\value{
A list of lists containing correlation coefficients, p-values and q-values for all operations.
}
\description{
This is the main workspider function in the anansi package. It manages the individual functionalities of anansi, including correlation analysis, correlation by group and differential correlation.
}
\examples{
\dontrun{
#Load example data:

data(dictionary)
data(FMT_data)

#Clean and prepare the example data.
#In the example dataset, the metabolites are already cleaned.

KOs   <- floor(FMT_KOs)
KOs   <- apply(KOs,c(1,2),function(x) as.numeric(as.character(x)))
KOs   <- KOs[apply(KOs == 0, 1, sum) <= (ncol(KOs) * 0.90), ]

KOs   <- KOs[row.names(KOs) \%in\% sort(unique(unlist(anansi_dic))),]

#CLR-transform.

KOs.exp = clr_c(KOs)

#Make sure that columns are features and rows are samples.

t1 = t(FMT_metab)
t2 = t(KOs.exp)

#Run anansi pipeline.

web        = weaveWebFromTables(tableY     = t1,
                                tableX     = t2,
                                dictionary = anansi_dic)

anansi_out = anansi(web     = web,
                    method  = "pearson",
                    groups  = FMT_metadata$Legend,
                    adjust.method = "BH",
                    verbose = TRUE)

results    = spinToWide(anansi_output = anansi_out)
}

}
